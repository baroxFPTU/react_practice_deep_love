(this.webpackJsonpdeep_love=this.webpackJsonpdeep_love||[]).push([[0],{203:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"restart",(function(){return _})),n.d(a,"showQuestion",(function(){return x})),n.d(a,"isReady",(function(){return m})),n.d(a,"updateQuestions",(function(){return Q}));var r=n(0),c=n.n(r),s=n(41),i=n.n(s),o=(n(98),n(99),n(212),n(213),n(208),n(13)),u=n.n(o),l=n(23),d=n(3);n(91),n(210),n(209),n(90);n(34);var j="https://deep-love-app-default-rtdb.asia-southeast1.firebasedatabase.app",p={isReady:0,isStart:!1,playerTurn:null,isShowQuestion:!1,listQuestions:[]},b="RESTART",f="SHOW_QUESTION",O="READY",h="UPDATE_QUESTIONS",y=n(2);var v=n.p+"static/media/thumbs-up.d53868eb.svg",_=function(){return{type:b}},x=function(e){return{type:f,playerTurn:e}},m=function(){return{type:O}},Q=function(e){return{type:h,newQuestions:e}},w=n(7),S=n(9);var T=function(e,t){switch(t.type){case b:return Object(S.a)(Object(S.a)({},e),{},{isShowQuestion:!1,playerTurn:null});case f:return Object(S.a)(Object(S.a)({},e),{},{isReady:0,isStart:!1,isShowQuestion:!0,playerTurn:t.playerTurn});case O:return e.isReady<1?Object(S.a)(Object(S.a)({},e),{},{isReady:e.isReady+=1}):Object(S.a)(Object(S.a)({},e),{},{isShowQuestion:!1,isStart:!0});case h:return Object(S.a)(Object(S.a)({},e),{},{listQuestions:Object(w.a)(t.newQuestions)});default:throw new Error("Invalid action")}};var R=function(e,t){var n=Object(r.useState)(e),a=Object(d.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){var e=c>0?setInterval((function(){s(c-1)}),1e3):t();return function(){return clearInterval(e)}}),[c,t]),[c]};var k=n(93),C=["children","once","onClick"];var E=function(e){var t=e.children,n=e.once,a=e.onClick,c=Object(k.a)(e,C),s=Object(r.useState)(0),i=Object(d.a)(s,2),o=i[0],u=i[1];return Object(y.jsx)("button",Object(S.a)(Object(S.a)({},c),{},{onClick:function(){n&&u(o+1),a()},disabled:o>=1,children:t}))},I=n(88),g=n.n(I);var A=function(e){var t=e.amount,n=e.fallback,a=e.playerId,r=R(t,n),c=Object(d.a)(r,1)[0];return Object(y.jsx)("div",{className:g.a.countdown,"data-player-id":a,children:c})},N=n(26),P=n.n(N);var M=function(e){var t=e.playerId,n=e.isStart,r=e.answerTurn,c=e.dispatch,s=r===t,i=null;return i=r?Object(y.jsx)(y.Fragment,{children:s?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(A,{amount:30,fallback:function(){console.log("im finish")}})}):Object(y.jsx)("button",{className:P.a.acceptButton,onClick:function(){c(a.restart())},children:"Accept"})}):Object(y.jsxs)(y.Fragment,{children:[n?Object(y.jsx)(A,{amount:3,fallback:function(){var e=Math.floor(2*Math.random()+1)+"";console.log("random playerid ",e),c(a.showQuestion(e))}}):Object(y.jsxs)("div",{className:P.a.readyCaption,children:[Object(y.jsx)("div",{className:P.a.icon,children:Object(y.jsx)("img",{src:v,alt:"icon"})}),"Ready to play"]}),Object(y.jsx)(E,{className:P.a.buttonReady,"data-player-id":t,onClick:function(){c(a.isReady())},once:!0,children:"Start"})]}),Object(y.jsx)("div",{className:P.a.areaPlayer,"data-player-id":t,children:i})},q=n(89),B=n.n(q);function F(e){var t=e.questions,n=e.onUpdateQuestions,a=e.playerTurn,c=Object(r.useState)(null),s=Object(d.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){var e=function(e){var t=e[Math.floor(Math.random()*(e.length-1)+1)],n=e.filter((function(e){return e.id!==t.id}));return[t,n]}(t),a=Object(d.a)(e,2),r=a[0],c=a[1];return o(r),n(c),function(){o(null)}}),[]),Object(y.jsxs)("div",{className:B.a.modalQuestion,"data-player-turn":a,children:[Object(y.jsx)("div",{className:"icon"}),i?Object(y.jsxs)("h3",{children:["C\xe2u h\u1ecfi: ",i.content]}):"\u0110\xe3 h\u1ebft c\xe2u h\u1ecfi"]})}F.defaultProps={question:null};var U=F;var J=function(e){var t=Object(r.useReducer)(T,p),n=Object(d.a)(t,2),c=n[0],s=n[1],i=c.isStart,o=c.isShowQuestion,b=c.listQuestions,f=c.playerTurn;return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/questions.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:for(c in n=e.sent,r=[],n)r.push(n[c]);s(a.updateQuestions(r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}try{!function(){e.apply(this,arguments)}()}catch(t){console.log(t)}}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(M,{playerId:"1",isStart:i,answerTurn:f,dispatch:s}),Object(y.jsx)(M,{playerId:"2",isStart:i,answerTurn:f,dispatch:s}),o&&Object(y.jsx)(U,{questions:b,onUpdateQuestions:function(e){s(a.updateQuestions(e))},playerTurn:f})]})};var D=function(){return Object(y.jsx)("div",{className:"deepLove",children:Object(y.jsx)(J,{})})},Y=n(56);i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Y.a,{children:Object(y.jsx)(D,{})})}),document.getElementById("root"))},26:function(e,t,n){e.exports={areaPlayer:"AreaPlayer_areaPlayer__11GlF",buttonReady:"AreaPlayer_buttonReady__9CIy3",clicked:"AreaPlayer_clicked__2TOsv",acceptButton:"AreaPlayer_acceptButton__1ZIEE",icon:"AreaPlayer_icon__3_0tM",readyCaption:"AreaPlayer_readyCaption__1JqBh"}},88:function(e,t,n){e.exports={countdown:"Countdown_countdown__q5ASo"}},89:function(e,t,n){e.exports={modalQuestion:"ModalQuestion_modalQuestion__2Th7V",appear1:"ModalQuestion_appear1__2XCQY",appear2:"ModalQuestion_appear2__3kbZt"}},98:function(e,t,n){},99:function(e,t,n){}},[[203,1,2]]]);
//# sourceMappingURL=main.75f80d49.chunk.js.map