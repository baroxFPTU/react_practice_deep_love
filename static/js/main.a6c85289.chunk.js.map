{"version":3,"sources":["components/Countdown/Countdown.module.css","components/ModalQuestion/ModalQuestion.module.css","assets/icon/thumbs-up.svg","store/constant.js","store/actions.js","store/reducer.js","store/hooks/useCountdown.js","components/Button/index.jsx","components/Countdown/index.jsx","components/AreaPlayer/index.jsx","store/utils.js","components/ModalQuestion/index.jsx","App.js","index.js","components/AreaPlayer/AreaPlayer.module.css"],"names":["module","exports","API_KEY","INITIAL_STATE","isReady","isStart","playerTurn","isShowQuestion","listQuestions","RESTART","SHOW_QUESTION","READY","UPDATE_QUESTIONS","restart","type","showQuestion","payload","updateQuestions","newQuestions","reducer","state","action","Error","useCountdown","amount","callback","useState","countdown","setCountdown","useEffect","timerId","setInterval","clearInterval","Button","children","once","onClick","props","counter","setCounter","disabled","Countdown","fallback","playerId","className","classes","AreaPlayer","answerTurn","dispatch","isMe","playSection","console","log","acceptButton","actions","Math","floor","random","readyCaption","icon","src","thumbsUp","alt","buttonReady","areaPlayer","ModalQuestion","questions","onUpdateQuestions","question","setQuestion","_randomQuestion","length","filteredQuestions","filter","id","randomQuestion","modalQuestion","content","defaultProps","App","useReducer","GameReducer","a","fetch","response","json","data","getQuestions","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a6c85289.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"countdown\":\"Countdown_countdown__1J0O9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalQuestion\":\"ModalQuestion_modalQuestion__2Ii9a\",\"appear1\":\"ModalQuestion_appear1__dq7Um\",\"appear2\":\"ModalQuestion_appear2__3DyC-\"};","export default __webpack_public_path__ + \"static/media/thumbs-up.d53868eb.svg\";","const API_KEY =\r\n  \"https://deep-love-app-default-rtdb.asia-southeast1.firebasedatabase.app/questions.json\";\r\n\r\nconst INITIAL_STATE = {\r\n  isReady: 0,\r\n  isStart: false,\r\n  playerTurn: null,\r\n  isShowQuestion: false,\r\n  listQuestions: [],\r\n};\r\n\r\nconst RESTART = \"RESTART\";\r\nconst SHOW_QUESTION = \"SHOW_QUESTION\";\r\nconst READY = \"READY\";\r\nconst UPDATE_QUESTIONS = \"UPDATE_QUESTIONS\";\r\n\r\nexport {\r\n  API_KEY,\r\n  INITIAL_STATE,\r\n  RESTART,\r\n  SHOW_QUESTION,\r\n  READY,\r\n  UPDATE_QUESTIONS,\r\n};\r\n","import { READY, RESTART, SHOW_QUESTION, UPDATE_QUESTIONS } from \"./constant\";\r\n\r\nexport const restart = () => {\r\n  return {\r\n    type: RESTART,\r\n  };\r\n};\r\n\r\nexport const showQuestion = (payload) => {\r\n  return {\r\n    type: SHOW_QUESTION,\r\n    playerTurn: payload,\r\n  };\r\n};\r\n\r\nexport const isReady = () => {\r\n  return {\r\n    type: READY,\r\n  };\r\n};\r\n\r\nexport const updateQuestions = (payload) => {\r\n  return {\r\n    type: UPDATE_QUESTIONS,\r\n    newQuestions: payload,\r\n  };\r\n};\r\n","import { READY, RESTART, SHOW_QUESTION, UPDATE_QUESTIONS } from \"./constant\";\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case RESTART:\r\n      return {\r\n        ...state,\r\n        isShowQuestion: false,\r\n        playerTurn: null,\r\n      };\r\n    case SHOW_QUESTION:\r\n      return {\r\n        ...state,\r\n        isReady: 0,\r\n        isStart: false,\r\n        isShowQuestion: true,\r\n        playerTurn: action.playerTurn,\r\n      };\r\n    case READY:\r\n      if (state.isReady < 1) {\r\n        return {\r\n          ...state,\r\n          isReady: (state.isReady += 1),\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        isShowQuestion: false,\r\n        isStart: true,\r\n      };\r\n    case UPDATE_QUESTIONS:\r\n      return {\r\n        ...state,\r\n        listQuestions: [...action.newQuestions],\r\n      };\r\n    default:\r\n      throw new Error(\"Invalid action\");\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nfunction useCountdown(amount, callback) {\r\n  const [countdown, setCountdown] = useState(amount);\r\n  useEffect(() => {\r\n    const timerId =\r\n      countdown > 0\r\n        ? setInterval(() => {\r\n            setCountdown(countdown - 1);\r\n          }, 1000)\r\n        : callback();\r\n\r\n    return () => {\r\n      return clearInterval(timerId);\r\n    };\r\n  }, [countdown]);\r\n\r\n  return [countdown];\r\n}\r\n\r\nexport default useCountdown;\r\n","import PropTypes from 'prop-types';\r\nimport React, { useState } from 'react';\r\n\r\nButton.propTypes = {\r\n  once: PropTypes.bool,\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nfunction Button({children,once, onClick, ...props}) {\r\n  const [counter, setCounter] = useState(0);\r\n\r\n  const handleOnClick = () => {\r\n    if (once) {\r\n      setCounter(counter + 1);\r\n    }\r\n\r\n    onClick();\r\n  }\r\n\r\n  return (\r\n    <button {...props} onClick={handleOnClick} disabled={counter >= 1}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;","import PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { useCountdown } from '../../store';\r\nimport classes from './Countdown.module.css';\r\n\r\nCountdown.propTypes = {\r\n  amount: PropTypes.number,\r\n  fallback: PropTypes.func,\r\n  playerId: PropTypes.string,\r\n};\r\n\r\nfunction Countdown({amount, fallback, playerId}) {\r\n  const [countdown] = useCountdown(amount, fallback);\r\n\r\n  return (\r\n    <div className={classes.countdown} data-player-id={playerId}>\r\n      {countdown}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Countdown;","import React, {useCallbackack} from 'react';\r\nimport thumbsUp from '../../assets/icon/thumbs-up.svg';\r\nimport { actions, randomPlayerId } from \"../../store\";\r\nimport Button from '../Button';\r\nimport Countdown from '../Countdown';\r\nimport classes from './AreaPlayer.module.css';\r\n\r\nAreaPlayer.propTypes = {\r\n  \r\n};\r\n\r\nfunction AreaPlayer({playerId, isStart, answerTurn, dispatch}) {\r\n  const isMe = answerTurn === playerId;\r\n  let playSection = null;\r\n  \r\n  const finish = () => {\r\n    console.log('im finish');\r\n  }\r\n  \r\n  const handleFinishCountDown = () => {\r\n    const playerId = randomPlayerId() + \"\";\r\n    console.log(\"random playerid \", playerId);\r\n    dispatch(actions.showQuestion(playerId));\r\n  };\r\n\r\n  const handleIsReady = () => {\r\n    dispatch(actions.isReady());\r\n  };\r\n\r\n  const handleRestart = () => {\r\n    dispatch(actions.restart());\r\n  };\r\n\r\n  if (answerTurn) {\r\n    playSection = (\r\n      <>\r\n        {(isMe) ?<> <Countdown amount={30} fallback={finish}/></>: <button className={classes.acceptButton} onClick={handleRestart}>Accept</button>}\r\n      </>\r\n    )\r\n  } else {\r\n    playSection = (\r\n      <>\r\n        {isStart ? <Countdown amount={3} fallback={handleFinishCountDown}/> :\r\n          <div className={classes.readyCaption}>\r\n            <div className={classes.icon}>\r\n              <img src={thumbsUp} alt='icon'/>\r\n            </div>\r\n            Ready to play\r\n          </div>}\r\n        <Button className={classes.buttonReady} data-player-id={playerId} onClick={handleIsReady} once>Start</Button>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={classes.areaPlayer} data-player-id={playerId}>\r\n     {playSection}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AreaPlayer;","function randomPlayerId() {\r\n  return Math.floor(Math.random() * (2 - 1 + 1) + 1);\r\n}\r\n\r\nexport { randomPlayerId };\r\n","import PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from 'react';\r\nimport classes from './ModalQuestion.module.css';\r\n\r\nModalQuestion.propTypes = {\r\n  question: PropTypes.string\r\n};\r\n\r\nModalQuestion.defaultProps = {\r\n  question: null\r\n}\r\n\r\nfunction randomQuestion(questions) {\r\n const randomIndex = Math.floor(Math.random() * (questions.length - 1)  + 1);\r\n const _randomQuestion = questions[randomIndex];\r\n const filteredQuestions = questions.filter(question => question.id !== _randomQuestion.id )\r\n\r\n return [_randomQuestion, filteredQuestions];\r\n}\r\n\r\nfunction ModalQuestion({questions, onUpdateQuestions, playerTurn}) {\r\n  const [question, setQuestion] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const [question, filteredQuestions] = randomQuestion(questions);\r\n    setQuestion(question);\r\n    onUpdateQuestions(filteredQuestions);\r\n    return () => {\r\n      setQuestion(null)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className={classes.modalQuestion} data-player-turn={playerTurn}>\r\n      <div className=\"icon\"></div>\r\n      {question ? (<h3>Câu hỏi: {question.content}</h3> ): 'Đã hết câu hỏi'}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ModalQuestion;","import \"./App.css\";\r\nimport React, { useReducer, useEffect } from \"react\";\r\nimport AreaPlayer from \"./components/AreaPlayer\";\r\nimport ModalQuestion from \"./components/ModalQuestion\";\r\nimport { actions, GameReducer } from \"./store\";\r\nimport { INITIAL_STATE, API_KEY } from \"./store/constant\";\r\n\r\nfunction App() {\r\n  const [state, dispatch] = useReducer(GameReducer, INITIAL_STATE);\r\n  const { isStart, isShowQuestion, listQuestions, playerTurn } = state;\r\n\r\n  useEffect(() => {\r\n    async function getQuestions() {\r\n      const response = await fetch(API_KEY);\r\n      const data = await response.json();\r\n\r\n      dispatch(actions.updateQuestions(data));\r\n    }\r\n    try {\r\n      getQuestions();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, []);\r\n\r\n  const handleUpdateQuestions = (newQuestions) => {\r\n    dispatch(actions.updateQuestions(newQuestions));\r\n  };\r\n\r\n  return (\r\n    <div className=\"deepLove\">\r\n      <AreaPlayer\r\n        playerId=\"1\"\r\n        isStart={isStart}\r\n        answerTurn={playerTurn}\r\n        dispatch={dispatch}\r\n      />\r\n      <AreaPlayer\r\n        playerId=\"2\"\r\n        isStart={isStart}\r\n        answerTurn={playerTurn}\r\n        dispatch={dispatch}\r\n      />\r\n      {isShowQuestion && (\r\n        <ModalQuestion\r\n          questions={listQuestions}\r\n          onUpdateQuestions={handleUpdateQuestions}\r\n          playerTurn={playerTurn}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"areaPlayer\":\"AreaPlayer_areaPlayer__2PkIO\",\"buttonReady\":\"AreaPlayer_buttonReady__212Um\",\"clicked\":\"AreaPlayer_clicked__iOSNV\",\"acceptButton\":\"AreaPlayer_acceptButton__RsgeG\",\"icon\":\"AreaPlayer_icon__1rHtt\",\"readyCaption\":\"AreaPlayer_readyCaption__3X0M1\"};"],"sourceRoot":""}