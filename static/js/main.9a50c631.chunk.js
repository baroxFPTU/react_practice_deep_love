(this.webpackJsonpdeep_love=this.webpackJsonpdeep_love||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"restart",(function(){return I})),n.d(a,"showQuestion",(function(){return N})),n.d(a,"isReady",(function(){return P})),n.d(a,"updateQuestions",(function(){return A}));var r=n(0),i=n.n(r),c=n(43),s=n.n(c),o=(n(100),n(4)),u=(n(101),n(214)),l=n(215),d=n(210),j=n(15),b=n.n(j),p=n(25),h=n(3),f=n(93),m=n(212),O=n(211),v=n(92),y=n(36),x="https://deep-love-app-default-rtdb.asia-southeast1.firebasedatabase.app",g={isReady:0,isStart:!1,playerTurn:null,isShowQuestion:!1,listQuestions:[]},_="RESTART",w="SHOW_QUESTION",S="READY",T="UPDATE_QUESTIONS";var Q=function(e){var t=Object(r.useState)(null),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)("pending"),s=Object(h.a)(c,2),o=s[0],u=s[1],l=function(){var t=Object(p.a)(b.a.mark((function t(n){var a,r,c,s,o,l,d=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:null,r={method:n},a&&(r.body=JSON.stringify(a)),u("pending"),t.next=6,fetch(e,r);case 6:if((c=t.sent).ok){t.next=10;break}throw u("failed"),new Error("Failed to get data");case 10:return t.next=12,c.json();case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0="completed";case 15:for(l in s=t.t0,o=[],s)o.push(s[l]);i(o),u("success");case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return[l,a,o]},q=n(2);var k=function(e){var t=Q("".concat(x,"/questions.json")),n=Object(h.a)(t,2),a=n[0],r=(n[1],y.b().shape({name:y.c().min(2,"T\xean g\xec ng\u1eafn v\u1eady!").max(50,"T\xean g\xec d\xe0i qu\xe1 v\u1eady!").required("T\xean b\u1ea1n l\xe0 g\xec n\xe8."),question:y.c().required("B\u1ea1n qu\xean nh\u1eadp c\xe2u h\u1ecfi r\u1ed3i n\xe8."),timeLimit:y.a().moreThan(5,"Th\u1eddi gian \xedt v\u1eady!").positive().integer().required("")})),i=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={content:t.question,id:Date.now(),author:t.name,timeLimit:t.timeLimit},e.next=3,a("POST",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(v.a,{initialValues:{name:"",question:"",timeLimit:30},validationSchema:r,onSubmit:i,children:function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit,r=e.touched,i=e.errors;return Object(q.jsxs)("form",{onSubmit:a,children:[Object(q.jsx)(f.a,{value:t.name,onChange:n,description:"V\xed d\u1ee5: Nguyen Van A",label:"T\xean c\u1ee7a b\u1ea1n",name:"name",variant:"filled",id:"name",radius:"md",size:"md",error:i.name&&r.name?i.name:null,style:{margin:"15px 0"},required:!0}),Object(q.jsx)(f.a,{value:t.question,onChange:n,name:"question",id:"question",variant:"filled",description:"V\xed d\u1ee5: Tai sao yeu?",label:"C\xe2u h\u1ecfi",radius:"md",size:"md",error:i.question&&r.question?i.question:null,style:{margin:"15px 0"},required:!0}),Object(q.jsx)(m.a,{value:t.timeLimit,onChange:n,description:"Gi\u1edbi h\u1ea1n th\u1eddi gian c\u1ee7a c\xe2u h\u1ecfi",placeholder:"Gi\u1edbi h\u1ea1n th\u1eddi gian c\u1ee7a c\xe2u h\u1ecfi",label:"Th\u1eddi gian",name:"timeLimit",id:"timeLimit",style:{margin:"15px 0"},required:!0}),Object(q.jsx)(O.a,{type:"submit",style:{margin:"10px 0"},children:"G\u1eedi"})]})}})})};var C=function(e){var t=Q("".concat(x,"/questions.json")),n=Object(h.a)(t,3),a=n[0],i=n[1],c=n[2];return console.log(c),Object(r.useEffect)((function(){a("GET")}),[]),Object(q.jsx)(q.Fragment,{children:null===i||void 0===i?void 0:i.map((function(e,t){return Object(q.jsx)(f.a,{style:{margin:"15px 0"},size:"lg",radius:"md",value:e.content,variant:"filled"},t)}))})};var E=function(e){return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(u.a,{style:{margin:"5rem auto",width:"800px"},padding:15,fluid:!0,children:[Object(q.jsx)(l.a,{order:1,children:"This is h1 title"}),Object(q.jsx)(k,{}),Object(q.jsx)(d.a,{iconPosition:"right",children:Object(q.jsx)(d.a.Item,{label:"Danh s\xe1ch c\xe2u h\u1ecfi",children:Object(q.jsx)(C,{})})})]})})},R=n.p+"static/media/thumbs-up.d53868eb.svg",I=function(){return{type:_}},N=function(e){return{type:w,playerTurn:e}},P=function(){return{type:S}},A=function(e){return{type:T,newQuestions:e}},F=n(8),M=n(10);var L=function(e,t){switch(t.type){case _:return Object(M.a)(Object(M.a)({},e),{},{isShowQuestion:!1,playerTurn:null});case w:return Object(M.a)(Object(M.a)({},e),{},{isReady:0,isStart:!1,isShowQuestion:!0,playerTurn:t.playerTurn});case S:return e.isReady<1?Object(M.a)(Object(M.a)({},e),{},{isReady:e.isReady+=1}):Object(M.a)(Object(M.a)({},e),{},{isShowQuestion:!1,isStart:!0});case T:return Object(M.a)(Object(M.a)({},e),{},{listQuestions:Object(F.a)(t.newQuestions)});default:throw new Error("Invalid action")}};var B=function(e,t){var n=Object(r.useState)(e),a=Object(h.a)(n,2),i=a[0],c=a[1];return Object(r.useEffect)((function(){var e=i>0?setInterval((function(){c(i-1)}),1e3):t();return function(){return clearInterval(e)}}),[i,t]),[i]};var G=n(95),U=["children","once","onClick"];var V=function(e){var t=e.children,n=e.once,a=e.onClick,i=Object(G.a)(e,U),c=Object(r.useState)(0),s=Object(h.a)(c,2),o=s[0],u=s[1];return Object(q.jsx)("button",Object(M.a)(Object(M.a)({},i),{},{onClick:function(){n&&u(o+1),a()},disabled:o>=1,children:t}))},D=n(90),J=n.n(D);var z=function(e){var t=e.amount,n=e.fallback,a=e.playerId,r=B(t,n),i=Object(h.a)(r,1)[0];return Object(q.jsx)("div",{className:J.a.countdown,"data-player-id":a,children:i})},Y=n(28),Z=n.n(Y);var H=function(e){var t=e.playerId,n=e.isStart,r=e.answerTurn,i=e.dispatch,c=r===t,s=null;return s=r?Object(q.jsx)(q.Fragment,{children:c?Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(z,{amount:30,fallback:function(){console.log("im finish")}})}):Object(q.jsx)("button",{className:Z.a.acceptButton,onClick:function(){i(a.restart())},children:"Accept"})}):Object(q.jsxs)(q.Fragment,{children:[n?Object(q.jsx)(z,{amount:3,fallback:function(){var e=Math.floor(2*Math.random()+1)+"";console.log("random playerid ",e),i(a.showQuestion(e))}}):Object(q.jsxs)("div",{className:Z.a.readyCaption,children:[Object(q.jsx)("div",{className:Z.a.icon,children:Object(q.jsx)("img",{src:R,alt:"icon"})}),"Ready to play"]}),Object(q.jsx)(V,{className:Z.a.buttonReady,"data-player-id":t,onClick:function(){i(a.isReady())},once:!0,children:"Start"})]}),Object(q.jsx)("div",{className:Z.a.areaPlayer,"data-player-id":t,children:s})},W=n(91),X=n.n(W);function K(e){var t=e.questions,n=e.onUpdateQuestions,a=e.playerTurn,i=Object(r.useState)(null),c=Object(h.a)(i,2),s=c[0],o=c[1];return Object(r.useEffect)((function(){var e=function(e){var t=e[Math.floor(Math.random()*(e.length-1)+1)],n=e.filter((function(e){return e.id!==t.id}));return[t,n]}(t),a=Object(h.a)(e,2),r=a[0],i=a[1];return o(r),n(i),function(){o(null)}}),[]),Object(q.jsxs)("div",{className:X.a.modalQuestion,"data-player-turn":a,children:[Object(q.jsx)("div",{className:"icon"}),s?Object(q.jsxs)("h3",{children:["C\xe2u h\u1ecfi: ",s.content]}):"\u0110\xe3 h\u1ebft c\xe2u h\u1ecfi"]})}K.defaultProps={question:null};var $=K;var ee=function(e){var t=Object(r.useReducer)(L,g),n=Object(h.a)(t,2),i=n[0],c=n[1],s=i.isStart,o=i.isShowQuestion,u=i.listQuestions,l=i.playerTurn;return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/questions.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:for(i in n=e.sent,r=[],n)r.push(n[i]);c(a.updateQuestions(r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}try{!function(){e.apply(this,arguments)}()}catch(t){console.log(t)}}),[]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(H,{playerId:"1",isStart:s,answerTurn:l,dispatch:c}),Object(q.jsx)(H,{playerId:"2",isStart:s,answerTurn:l,dispatch:c}),o&&Object(q.jsx)($,{questions:u,onUpdateQuestions:function(e){c(a.updateQuestions(e))},playerTurn:l})]})};var te=function(){return Object(q.jsx)("div",{className:"deepLove",children:Object(q.jsxs)(o.c,{children:[Object(q.jsx)(o.a,{path:"/contribute",element:Object(q.jsx)(E,{})}),Object(q.jsx)(o.a,{path:"/",element:Object(q.jsx)(ee,{})})]})})},ne=n(58);s.a.render(Object(q.jsx)(i.a.StrictMode,{children:Object(q.jsx)(ne.a,{basename:"/react_practice_deep_love",children:Object(q.jsx)(te,{})})}),document.getElementById("root"))},28:function(e,t,n){e.exports={areaPlayer:"AreaPlayer_areaPlayer__11GlF",buttonReady:"AreaPlayer_buttonReady__9CIy3",clicked:"AreaPlayer_clicked__2TOsv",acceptButton:"AreaPlayer_acceptButton__1ZIEE",icon:"AreaPlayer_icon__3_0tM",readyCaption:"AreaPlayer_readyCaption__1JqBh"}},90:function(e,t,n){e.exports={countdown:"Countdown_countdown__q5ASo"}},91:function(e,t,n){e.exports={modalQuestion:"ModalQuestion_modalQuestion__2Th7V",appear1:"ModalQuestion_appear1__2XCQY",appear2:"ModalQuestion_appear2__3kbZt"}}},[[205,1,2]]]);
//# sourceMappingURL=main.9a50c631.chunk.js.map